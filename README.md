# Mini Scale

Компактные электронные весы на базе Wemos D1 Mini (ESP8266) с OLED-дисплеем и датчиком HX711.

## Возможности

- Измерение веса в килограммах с точностью до 0.01 кг
- Отображение привеса (дельты) между сессиями
- Тарирование (обнуление) и отмена тары
- Режим калибровки с настройкой коэффициента
- Сохранение настроек в EEPROM (тара, калибровка, последний вес)
- Мониторинг заряда батареи со сглаживанием показаний
- Автовыключение через 3 минуты (Deep Sleep)

## Компоненты

| Компонент | Подключение |
|-----------|-------------|
| Wemos D1 Mini (ESP8266) | — |
| HX711 (АЦП для тензодатчика) | DOUT → D6, SCK → D5 |
| OLED SSD1306 128x64 (I2C) | SDA → D2, SCL → D1 |
| Кнопка | D3 (INPUT_PULLUP) |
| Батарея (через делитель 100 кОм) | A0 |

## Управление

### Обычный режим
- **Удержание кнопки 5 сек** — тарирование (обнуление веса)
- **Удержание кнопки 10 сек** — отмена тары (возврат прежнего нуля)

### Режим калибровки
Вход: зажать кнопку при включении питания.

- **Короткое нажатие** — выполнить действие текущего режима
- **Длинное нажатие (>0.8 сек)** — переключить режим

Режимы калибровки:
1. `+10` — увеличить коэффициент на 10
2. `-10` — уменьшить коэффициент на 10
3. `SAVE & EXIT` — сохранить и перезагрузить

## Зависимости (Arduino Libraries)

- [HX711](https://github.com/bogde/HX711)
- [Adafruit SSD1306](https://github.com/adafruit/Adafruit_SSD1306)
- [Adafruit GFX](https://github.com/adafruit/Adafruit-GFX-Library)

## Структура проекта

```
Mini_Scale/
├── Mini_Scale.ino      # Главный скетч (setup/loop)
├── Config.h            # Пины и константы
├── ScaleControl.h      # Работа с HX711 (вес, тара)
├── DisplayControl.h    # Вывод на OLED-дисплей
├── ButtonControl.h     # Обработка нажатий кнопки
├── CalibrationMode.h   # Режим калибровки
└── MemoryControl.h     # Чтение/запись EEPROM
```

## Прошивка

1. Установить [Arduino IDE](https://www.arduino.cc/en/software)
2. Добавить поддержку ESP8266: `Файл → Настройки → URL платы` → `http://arduino.esp8266.com/stable/package_esp8266com_index.json`
3. Установить библиотеки из раздела «Зависимости» через Library Manager
4. Выбрать плату: `LOLIN(WEMOS) D1 mini`
5. Загрузить скетч
